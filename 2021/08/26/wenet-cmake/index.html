<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="cmake,wenet," />










<meta name="description" content="wenet cmake 文件阅读命令介绍命令: include_directories([AFTER|BEFORE] [SYSTEM] dir1 [dir2 ...])">
<meta property="og:type" content="article">
<meta property="og:title" content="wenet-cmake">
<meta property="og:url" content="http://example.com/2021/08/26/wenet-cmake/index.html">
<meta property="og:site_name" content="Mashiro Blog">
<meta property="og:description" content="wenet cmake 文件阅读命令介绍命令: include_directories([AFTER|BEFORE] [SYSTEM] dir1 [dir2 ...])">
<meta property="og:locale">
<meta property="article:published_time" content="2021-08-26T07:36:59.000Z">
<meta property="article:modified_time" content="2021-08-28T09:07:52.358Z">
<meta property="article:author" content="Mashiro">
<meta property="article:tag" content="cmake">
<meta property="article:tag" content="wenet">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://example.com/2021/08/26/wenet-cmake/"/>





  <title>wenet-cmake | Mashiro Blog</title>
  








<meta name="generator" content="Hexo 5.4.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <a target="_blank" rel="noopener" href="https://github.com/Mashiro009" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>


    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Mashiro Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">subtitle</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/08/26/wenet-cmake/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mashiro009">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/chicken.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mashiro Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">wenet-cmake</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-08-26T15:36:59+08:00">
                2021-08-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/asr/" itemprop="url" rel="index">
                    <span itemprop="name">asr</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="wenet-cmake-文件阅读"><a href="#wenet-cmake-文件阅读" class="headerlink" title="wenet cmake 文件阅读"></a>wenet cmake 文件阅读</h1><h2 id="命令介绍"><a href="#命令介绍" class="headerlink" title="命令介绍"></a>命令介绍</h2><p>命令: <code>include_directories([AFTER|BEFORE] [SYSTEM] dir1 [dir2 ...])</code></p>
<span id="more"></span>
<p>作用：</p>
<p>把dir1, [dir2 …]这（些）个路径添加到当前CMakeLists及其子CMakeLists的头文件包含路径中;</p>
<p>AFTER 或者 BEFORE 指定了要添加的路径是添加到原有包含列表之前或之后</p>
<p>若指定 SYSTEM 参数，则把被包含的路径当做系统包含路径来处理</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a target="_blank" rel="noopener" href="https://cmake.org/cmake/help/latest/index.html">CMake文档</a><br><a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/cpp/CMake-linux">Get started with CMake Tools on Linux</a><br><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/wLJkkLTup_Uf7X8MfDYNMQ">分享一篇很不错的CMake入门文章，值得收藏细读！</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/102050750">CMake之引入外部项目的三种方法</a><br><a target="_blank" rel="noopener" href="https://ask.csdn.net/questions/211355">cmake的 target_link_libraries语法使用问题</a></p>
<p>ExternalProject在编译时下载项目并引入,也就是说在Configure过程中我们并没有从git上下载项目，这就导致我们无法像submodule那样直接通过add_subdirectory引入项目，而是要预先定义好编译后库文件和头文件的位置，通过target_link_libraries和target_include_directories进行引入。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CMAKE_SOURCE_DIR</span><br><span class="line">PROJECT_SOURCE_DIR</span><br><span class="line">&lt;projectname&gt;_SOURCE_DIR</span><br></pre></td></tr></table></figure>
<p>这三个变量指代的内容是一致的,不论采用何种编译方式,都是工程顶层目录。<br>也就是在 in source 编译时,他跟 CMAKE_BINARY_DIR 等变量一致。<br>PROJECT_SOURCE_DIR 跟其他指令稍有区别,现在,你可以理解为他们是一致的。</p>
<p><code>get_filename_component(&lt;var&gt; &lt;FileName&gt; &lt;mode&gt; [BASE_DIR &lt;dir&gt;] [CACHE])</code><br><code>&lt;mode&gt;</code>为以下之一</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ABSOLUTE  = Full path to file</span><br><span class="line">REALPATH  = Full path to existing file with symlinks resolved</span><br></pre></td></tr></table></figure>

<p><code>add_subdirectory(source_dir [binary_dir] [EXCLUDE_FROM_ALL])</code><br>为构建添加一个子目录。source_dir指定了源CMakeLists.txt和代码文件所在的目录。如果它是一个相对路径，它将被评估为与当前目录有关（典型用法），但它也可以是一个绝对路径。binary_dir指定了放置输出文件的目录。如果它是一个相对路径，它将相对于当前输出目录进行评估，但它也可以是一个绝对路径。如果没有指定binary_dir，在扩展任何相对路径之前，将使用source_dir的值（典型用法）。在当前输入文件的处理继续到该命令之后，指定源目录中的CMakeLists.txt文件将立即被CMake处理。</p>
<p><code>include_directories([AFTER|BEFORE] [SYSTEM] dir1 [dir2 ...])</code></p>
<p><code>add_dependencies(&lt;target&gt; [&lt;target-dependency&gt;]...)</code><br>Add a dependency between top-level targets.<br>让顶级<code>&lt;target&gt;</code>依赖其他顶级目标，以确保它们在<code>&lt;target&gt;</code>之前构建。顶层目标是由add_executable()、add_library()或add_custom_target()命令之一创建的目标（但不包括由CMake生成的目标，如install）。<br>添加到导入的目标或接口库的依赖关系在其位置上被跟踪，因为目标本身并没有构建。</p>
<p><code>link_directories([AFTER|BEFORE] directory1 [directory2 ...])</code><br>Add directories in which the linker will look for libraries.<br>添加链接器应该搜索的库的路径。这个命令的相对路径被解释为相对于当前的源目录，见CMP0015。</p>
<h2 id="原始CMAKE文件带个人注释"><a href="#原始CMAKE文件带个人注释" class="headerlink" title="原始CMAKE文件带个人注释"></a>原始CMAKE文件带个人注释</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.14</span> FATAL_ERROR)</span><br><span class="line"><span class="comment"># cmake的最小版本要求</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">project</span>(wenet VERSION <span class="number">0.1</span>)</span><br><span class="line"><span class="comment"># 项目信息 版本号</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">option</span>(GRPC <span class="string">&quot;whether to build gRPC&quot;</span> <span class="keyword">OFF</span>)</span><br><span class="line"><span class="comment"># 编译选项 可以理解为bool值</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cmake 包含头文件</span></span><br><span class="line"><span class="comment"># 就是wenet core里面自己写的源码</span></span><br><span class="line"><span class="keyword">include_directories</span>(</span><br><span class="line"><span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span></span><br><span class="line"><span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/kaldi  <span class="comment"># for not changing c++ header names in kaldi source files</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_VERBOSE_MAKEFILE <span class="keyword">on</span>)</span><br><span class="line"><span class="comment"># 设置CMAKE_VERBOSE_MAKEFILE这个变量 为 on</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加两个引入外部项目的工具</span></span><br><span class="line"><span class="keyword">include</span>(FetchContent)</span><br><span class="line"><span class="keyword">include</span>(ExternalProject)</span><br><span class="line"><span class="comment"># 设置FETCHCONTENT_QUIET变量,应该是让FetchContent使用时不静默</span></span><br><span class="line"><span class="keyword">set</span>(FETCHCONTENT_QUIET <span class="keyword">off</span>)</span><br><span class="line"><span class="comment"># get_filename_component得到一个完整文件名中的特定部分</span></span><br><span class="line"><span class="comment"># 把 在BASE_DIR:&quot;$&#123;CMAKE_SOURCE_DIR&#125;&quot;的相对路径REALPATH下&quot;fc_base&quot;目录 设置到fc_base变量中</span></span><br><span class="line"><span class="keyword">get_filename_component</span>(fc_base <span class="string">&quot;fc_base&quot;</span> REALPATH BASE_DIR <span class="string">&quot;$&#123;CMAKE_SOURCE_DIR&#125;&quot;</span>)</span><br><span class="line"><span class="comment"># 设定FETCHCONTENT_BASE_DIR为$&#123;fc_base&#125;  把所有FetchContent下载的东西都放到fc_base当中去</span></span><br><span class="line"><span class="keyword">set</span>(FETCHCONTENT_BASE_DIR <span class="variable">$&#123;fc_base&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果不是在windows平台 即c++编译器用的不是MSVC</span></span><br><span class="line"><span class="comment"># 设置CMAKE_CXX_FLAGS与第三方工具openfst的设置保持一致</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">NOT</span> MSVC)</span><br><span class="line">  <span class="comment"># Keep the same with openfst, -fPIC or -fpic</span></span><br><span class="line">  <span class="keyword">set</span>(CMAKE_CXX_FLAGS <span class="string">&quot;$&#123;CMAKE_CXX_FLAGS&#125; -std=c++14 -pthread -fPIC&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用FetchContent_Declare(MyName) 获取项目。可以是一个URL也可以是一个Git仓库。</span></span><br><span class="line"><span class="comment"># FetchContent_MakeAvailable 相当于包含了两步</span></span><br><span class="line"><span class="comment"># 使用FetchContent_GetProperties(MyName) 获取我们需要的变量MyName_*</span></span><br><span class="line"><span class="comment"># 使用add_subdirectory($&#123;MyName_SOURCE_DIR&#125; $&#123;MyName_BINARY_DIR&#125;)引入项目</span></span><br><span class="line"><span class="comment"># 使用命令 add_subdirectory 指明本项目包含一个子目录 math ，这样 math 目录下的 CMakeLists.txt 文件和源代码也会被处理 </span></span><br><span class="line"><span class="comment"># 将编译好的bin/include文件加进来</span></span><br><span class="line"><span class="comment"># third_party: gflags</span></span><br><span class="line">FetchContent_Declare(gflags</span><br><span class="line">  URL      https://github.com/gflags/gflags/archive/v2.<span class="number">2.1</span>.zip</span><br><span class="line">  URL_HASH SHA256=<span class="number">4</span>e44b69e709c826734dbbbd5208f61888a2faf63f239d73d8ba0011b2dccc97a</span><br><span class="line">)</span><br><span class="line">FetchContent_MakeAvailable(gflags)</span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;gflags_BINARY_DIR&#125;</span>/<span class="keyword">include</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># third_party: glog</span></span><br><span class="line">FetchContent_Declare(glog</span><br><span class="line">  URL      https://github.com/google/glog/archive/v0.<span class="number">4.0</span>.zip</span><br><span class="line">  URL_HASH SHA256=<span class="number">9</span>e1b54eb2782f53cd8af107ecf08d2ab64b8d0dc2b7f5594472f3bd63ca85cdc</span><br><span class="line">)</span><br><span class="line">FetchContent_MakeAvailable(glog)</span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;glog_SOURCE_DIR&#125;</span>/src <span class="variable">$&#123;glog_BINARY_DIR&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># third_party: gtest</span></span><br><span class="line">FetchContent_Declare(googletest</span><br><span class="line">  URL      https://github.com/google/googletest/archive/release-<span class="number">1.10</span>.<span class="number">0</span>.zip</span><br><span class="line">  URL_HASH SHA256=<span class="number">94</span>c634d499558a76fa649edb13721dce6e98fb1e7018dfaeba3cd7a083945e91</span><br><span class="line">)</span><br><span class="line">FetchContent_MakeAvailable(googletest)</span><br><span class="line"></span><br><span class="line"><span class="comment"># third_party: boost</span></span><br><span class="line">FetchContent_Declare(boost</span><br><span class="line">  URL      https://boostorg.jfrog.io/artifactory/main/release/<span class="number">1.75</span>.<span class="number">0</span>/source/boost_1_75_0.tar.gz</span><br><span class="line">  URL_HASH SHA256=aeb26f80e80945e82ee93e5939baebdca47b9dee80a07d3144be1e1a6a66dd6a</span><br><span class="line">)</span><br><span class="line">FetchContent_MakeAvailable(boost)</span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;boost_SOURCE_DIR&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># third_party: libtorch 1.6.0, use FetchContent_Declare to download, and</span></span><br><span class="line"><span class="comment"># use find_package to find since libtorch is not a standard cmake project</span></span><br><span class="line"><span class="keyword">set</span>(PYTORCH_VERSION <span class="string">&quot;1.6.0&quot;</span>)</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$&#123;CMAKE_SYSTEM_NAME&#125;</span> <span class="keyword">STREQUAL</span> <span class="string">&quot;Windows&quot;</span>)</span><br><span class="line">    <span class="keyword">set</span>(LIBTORCH_URL <span class="string">&quot;https://download.pytorch.org/libtorch/cpu/libtorch-win-shared-with-deps-$&#123;PYTORCH_VERSION&#125;%2Bcpu.zip&quot;</span>)</span><br><span class="line">    <span class="keyword">set</span>(URL_HASH <span class="string">&quot;SHA256=dacb2af654f1cffa43b0f3187ce945e1c93305b4c8bb60361c7a8cb543e1da82&quot;</span>)</span><br><span class="line">    <span class="keyword">set</span>(CMAKE_BUILD_TYPE <span class="string">&quot;Release&quot;</span>)</span><br><span class="line"><span class="keyword">elseif</span>(<span class="variable">$&#123;CMAKE_SYSTEM_NAME&#125;</span> <span class="keyword">STREQUAL</span> <span class="string">&quot;Linux&quot;</span>)</span><br><span class="line">    <span class="keyword">set</span>(LIBTORCH_URL <span class="string">&quot;https://download.pytorch.org/libtorch/cpu/libtorch-cxx11-abi-shared-with-deps-$&#123;PYTORCH_VERSION&#125;%2Bcpu.zip&quot;</span>)</span><br><span class="line">    <span class="keyword">set</span>(URL_HASH <span class="string">&quot;SHA256=c6c0d3a87039338f7812a1ae343b9e48198536f20d1415b0e5a9a15ba7b90b3f&quot;</span>)</span><br><span class="line"><span class="keyword">elseif</span>(<span class="variable">$&#123;CMAKE_SYSTEM_NAME&#125;</span> <span class="keyword">STREQUAL</span> <span class="string">&quot;Darwin&quot;</span>)</span><br><span class="line">    <span class="keyword">set</span>(LIBTORCH_URL <span class="string">&quot;https://download.pytorch.org/libtorch/cpu/libtorch-macos-$&#123;PYTORCH_VERSION&#125;.zip&quot;</span>)</span><br><span class="line">    <span class="keyword">set</span>(URL_HASH <span class="string">&quot;SHA256=e1140bed7bd56c26638bae28aebbdf68e588a9fae92c6684645bcdd996e4183c&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">    <span class="keyword">message</span>(FATAL_ERROR <span class="string">&quot;Unsupported CMake System Name &#x27;$&#123;CMAKE_SYSTEM_NAME&#125;&#x27; (expected &#x27;Windows&#x27;, &#x27;Linux&#x27; or &#x27;Darwin&#x27;)&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line">FetchContent_Declare(libtorch</span><br><span class="line">  URL      <span class="variable">$&#123;LIBTORCH_URL&#125;</span></span><br><span class="line">  URL_HASH <span class="variable">$&#123;URL_HASH&#125;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">set</span>(gtest_force_shared_crt <span class="keyword">ON</span> CACHE BOOL <span class="string">&quot;Always use msvcrt.dll&quot;</span> FORCE)</span><br><span class="line">FetchContent_MakeAvailable(libtorch)</span><br><span class="line"><span class="keyword">find_package</span>(Torch REQUIRED PATHS <span class="variable">$&#123;libtorch_SOURCE_DIR&#125;</span> NO_DEFAULT_PATH)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_FLAGS <span class="string">&quot;$&#123;CMAKE_CXX_FLAGS&#125; $&#123;TORCH_CXX_FLAGS&#125; -DC10_USE_GLOG&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># add_library 将 src 目录中的源文件编译为静态链接库。</span></span><br><span class="line"><span class="comment"># 生成一个library 再用 target_link_libraries 连接上这个library</span></span><br><span class="line"><span class="comment"># utils</span></span><br><span class="line"><span class="keyword">add_library</span>(utils STATIC</span><br><span class="line">  utils/<span class="keyword">string</span>.cc</span><br><span class="line">  utils/utils.cc</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># The original openfst uses GNU Build System to run configure and build.</span></span><br><span class="line"><span class="comment"># So, we use &quot;OpenFST port for Windows&quot; to build openfst with cmake in Windows.</span></span><br><span class="line"><span class="comment"># Openfst is compiled with glog/gflags to avoid log and flag conflicts with log and flags in wenet/libtorch.</span></span><br><span class="line"><span class="comment"># To build openfst with gflags and glog, we comment out some vars of &#123;flags, log&#125;.h and flags.cc.</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">NOT</span> MSVC)</span><br><span class="line">  <span class="keyword">set</span>(openfst_SOURCE_DIR <span class="variable">$&#123;fc_base&#125;</span>/openfst-src)</span><br><span class="line">  <span class="keyword">set</span>(openfst_BINARY_DIR <span class="variable">$&#123;fc_base&#125;</span>/openfst-build)</span><br><span class="line">  <span class="keyword">set</span>(openfst_PREFIX_DIR <span class="variable">$&#123;fc_base&#125;</span>/openfst-subbuild/openfst-populate-prefix)</span><br><span class="line">  <span class="comment"># COMMAND 那句 用$&#123;CMAKE_SOURCE_DIR&#125;/patch/openfst 里面的文件 替换了 $&#123;openfst_SOURCE_DIR&#125;里面的几个文件</span></span><br><span class="line">  <span class="comment"># 具体是&#123;flags, log&#125;.h and flags.cc</span></span><br><span class="line">  ExternalProject_Add(openfst</span><br><span class="line">    URL               https://github.com/mjansche/openfst/archive/<span class="number">1.6</span>.<span class="number">5</span>.zip</span><br><span class="line">    URL_HASH          SHA256=b720357a464f42e181d7e33f60867b54044007f50baedc8f4458a3926f4a5a78</span><br><span class="line">    SOURCE_DIR        <span class="variable">$&#123;openfst_SOURCE_DIR&#125;</span></span><br><span class="line">    BINARY_DIR        <span class="variable">$&#123;openfst_BINARY_DIR&#125;</span></span><br><span class="line">    CONFIGURE_COMMAND <span class="variable">$&#123;openfst_SOURCE_DIR&#125;</span>/configure --prefix=<span class="variable">$&#123;openfst_PREFIX_DIR&#125;</span></span><br><span class="line">                        <span class="string">&quot;CPPFLAGS=-I$&#123;gflags_BINARY_DIR&#125;/include -I$&#123;glog_SOURCE_DIR&#125;/src -I$&#123;glog_BINARY_DIR&#125;&quot;</span></span><br><span class="line">                        <span class="string">&quot;LDFLAGS=-L$&#123;gflags_BINARY_DIR&#125; -L$&#123;glog_BINARY_DIR&#125;&quot;</span></span><br><span class="line">                        <span class="string">&quot;LIBS=-lgflags_nothreads -lglog -lpthread&quot;</span></span><br><span class="line">    <span class="keyword">COMMAND</span>           <span class="variable">$&#123;CMAKE_COMMAND&#125;</span> -E copy_directory <span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/patch/openfst <span class="variable">$&#123;openfst_SOURCE_DIR&#125;</span></span><br><span class="line">    <span class="keyword">BUILD_COMMAND</span>     make -j <span class="number">4</span></span><br><span class="line">  )</span><br><span class="line">  <span class="comment"># 不是cmake构建的项目用add_dependencies添加依赖</span></span><br><span class="line">  <span class="keyword">add_dependencies</span>(openfst gflags glog)</span><br><span class="line">  <span class="keyword">add_dependencies</span>(utils openfst)</span><br><span class="line">  <span class="comment"># 添加一个路径look for libraries</span></span><br><span class="line">  <span class="keyword">link_directories</span>(<span class="variable">$&#123;openfst_PREFIX_DIR&#125;</span>/lib)</span><br><span class="line">  <span class="comment"># 添加链接库</span></span><br><span class="line">  <span class="keyword">target_link_libraries</span>(utils PUBLIC fst dl)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">  <span class="keyword">execute_process</span>(<span class="keyword">COMMAND</span> bootstrap.bat WORKING_DIRECTORY <span class="variable">$&#123;boost_SOURCE_DIR&#125;</span>)</span><br><span class="line">  <span class="keyword">execute_process</span>(<span class="keyword">COMMAND</span> b2.exe WORKING_DIRECTORY <span class="variable">$&#123;boost_SOURCE_DIR&#125;</span>)</span><br><span class="line">  <span class="keyword">link_directories</span>(<span class="variable">$&#123;boost_SOURCE_DIR&#125;</span>/stage/lib)</span><br><span class="line">  <span class="keyword">file</span>(GLOB TORCH_DLLS <span class="string">&quot;$&#123;TORCH_INSTALL_PREFIX&#125;/lib/*.dll&quot;</span>)</span><br><span class="line">  <span class="keyword">file</span>(COPY <span class="variable">$&#123;TORCH_DLLS&#125;</span> DESTINATION <span class="variable">$&#123;CMAKE_BINARY_DIR&#125;</span>)</span><br><span class="line">  FetchContent_Declare(openfst</span><br><span class="line">    URL      https://github.com.cnpmjs.org/kkm000/openfst/archive/refs/tags/win/<span class="number">1.6</span>.<span class="number">5.1</span>.tar.gz</span><br><span class="line">    URL_HASH SHA256=<span class="number">02</span>c49b559c3976a536876063369efc0e41ab374be1035918036474343877046e</span><br><span class="line">  )</span><br><span class="line">  FetchContent_MakeAvailable(openfst)</span><br><span class="line">  <span class="keyword">execute_process</span>(<span class="keyword">COMMAND</span> <span class="variable">$&#123;CMAKE_COMMAND&#125;</span> -E copy_directory <span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/patch/openfst <span class="variable">$&#123;openfst_SOURCE_DIR&#125;</span>)</span><br><span class="line">  <span class="keyword">add_dependencies</span>(fst gflags glog)</span><br><span class="line">  <span class="keyword">target_link_libraries</span>(fst PUBLIC gflags_nothreads_static glog)</span><br><span class="line">  <span class="keyword">target_link_libraries</span>(utils PUBLIC fst)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;openfst_SOURCE_DIR&#125;</span>/src/<span class="keyword">include</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译frontend库</span></span><br><span class="line"><span class="comment"># frontend</span></span><br><span class="line"><span class="keyword">add_library</span>(frontend STATIC</span><br><span class="line">  frontend/feature_pipeline.cc</span><br><span class="line">  frontend/fft.cc</span><br><span class="line">)</span><br><span class="line"><span class="comment"># frontend需要utils的内容 链接到utils上</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(frontend PUBLIC utils)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用子目录 编译 kaldi cmakelist</span></span><br><span class="line"><span class="comment"># kaldi: wfst based decoder</span></span><br><span class="line"><span class="keyword">add_subdirectory</span>(kaldi)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译decoder库</span></span><br><span class="line"><span class="comment"># decoder</span></span><br><span class="line"><span class="keyword">add_library</span>(decoder STATIC</span><br><span class="line">  decoder/ctc_prefix_beam_search.cc</span><br><span class="line">  decoder/ctc_wfst_beam_search.cc</span><br><span class="line">  decoder/ctc_endpoint.cc</span><br><span class="line">  decoder/torch_asr_decoder.cc</span><br><span class="line">  decoder/torch_asr_model.cc</span><br><span class="line">)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(decoder PUBLIC <span class="variable">$&#123;TORCH_LIBRARIES&#125;</span> kaldi-decoder utils)</span><br><span class="line"><span class="comment"># decoder需要kaldi-decoder utils的内容 链接到utils上</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译ctc_prefix_beam_search_test</span></span><br><span class="line"><span class="comment"># 链接上gtest_main gmock decoder</span></span><br><span class="line"><span class="comment"># 添加一个测试</span></span><br><span class="line"><span class="keyword">add_executable</span>(ctc_prefix_beam_search_test decoder/ctc_prefix_beam_search_test.cc)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(ctc_prefix_beam_search_test PUBLIC gtest_main gmock decoder)</span><br><span class="line"><span class="keyword">add_test</span>(CTC_PREFIX_BEAM_SEARCH_TEST ctc_prefix_beam_search_test)</span><br><span class="line"></span><br><span class="line"><span class="comment"># websocket</span></span><br><span class="line"><span class="keyword">add_library</span>(websocket STATIC</span><br><span class="line">  websocket/websocket_client.cc</span><br><span class="line">  websocket/websocket_server.cc</span><br><span class="line">)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(websocket PUBLIC decoder frontend)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># binary</span></span><br><span class="line"><span class="keyword">add_executable</span>(decoder_main bin/decoder_main.cc)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(decoder_main PUBLIC frontend decoder)</span><br><span class="line"><span class="keyword">add_executable</span>(websocket_client_main bin/websocket_client_main.cc)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(websocket_client_main PUBLIC websocket)</span><br><span class="line"><span class="keyword">add_executable</span>(websocket_server_main bin/websocket_server_main.cc)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(websocket_server_main PUBLIC websocket)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(GRPC)</span><br><span class="line">  <span class="keyword">include_directories</span>(<span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/grpc)</span><br><span class="line">  <span class="comment"># third_party: grpc</span></span><br><span class="line">  <span class="comment"># On how to build grpc, you may refer to https://github.com/grpc/grpc</span></span><br><span class="line">  <span class="comment"># We recommend manually recursive clone the repo to avoid internet connection problem</span></span><br><span class="line">  FetchContent_Declare(gRPC</span><br><span class="line">    GIT_REPOSITORY https://github.com/grpc/grpc</span><br><span class="line">    GIT_TAG        v1.<span class="number">37.1</span></span><br><span class="line">  )</span><br><span class="line">  FetchContent_MakeAvailable(gRPC)</span><br><span class="line"></span><br><span class="line">  <span class="comment"># compile wenet.proto</span></span><br><span class="line">  <span class="keyword">set</span>(PROTO_DIR <span class="string">&quot;$&#123;CMAKE_SOURCE_DIR&#125;/grpc&quot;</span>)</span><br><span class="line">  <span class="keyword">add_custom_command</span>(</span><br><span class="line">    OUTPUT <span class="variable">$&#123;PROTO_DIR&#125;</span>/wenet.pb.cc</span><br><span class="line">           <span class="variable">$&#123;PROTO_DIR&#125;</span>/wenet.pb.h</span><br><span class="line">           <span class="variable">$&#123;PROTO_DIR&#125;</span>/wenet.grpc.pb.cc</span><br><span class="line">           <span class="variable">$&#123;PROTO_DIR&#125;</span>/wenet.grpc.pb.h</span><br><span class="line">    <span class="keyword">COMMAND</span> <span class="variable">$&#123;protobuf_BINARY_DIR&#125;</span>/protoc</span><br><span class="line">    ARGS --grpc_out <span class="string">&quot;$&#123;PROTO_DIR&#125;&quot;</span></span><br><span class="line">      --cpp_out <span class="string">&quot;$&#123;PROTO_DIR&#125;&quot;</span></span><br><span class="line">      -I <span class="string">&quot;$&#123;PROTO_DIR&#125;&quot;</span></span><br><span class="line">      --plugin=protoc-gen-grpc=<span class="variable">$&#123;grpc_BINARY_DIR&#125;</span>/grpc_cpp_plugin</span><br><span class="line">      wenet.proto)</span><br><span class="line"></span><br><span class="line">  <span class="comment"># grpc_server/client</span></span><br><span class="line">  <span class="keyword">link_directories</span>(<span class="variable">$&#123;protobuf_BINARY_DIR&#125;</span>/lib)</span><br><span class="line">  <span class="keyword">add_library</span>(wenet_grpc STATIC</span><br><span class="line">    grpc/grpc_client.cc</span><br><span class="line">    grpc/grpc_server.cc</span><br><span class="line">    grpc/wenet.pb.cc</span><br><span class="line">    grpc/wenet.grpc.pb.cc</span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">target_link_libraries</span>(wenet_grpc PUBLIC grpc++ grpc++_reflection decoder frontend)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">add_executable</span>(grpc_server_main bin/grpc_server_main.cc)</span><br><span class="line">  <span class="keyword">target_link_libraries</span>(grpc_server_main PUBLIC wenet_grpc)</span><br><span class="line">  <span class="keyword">add_executable</span>(grpc_client_main bin/grpc_client_main.cc)</span><br><span class="line">  <span class="keyword">target_link_libraries</span>(grpc_client_main PUBLIC wenet_grpc)</span><br><span class="line"><span class="keyword">endif</span>(GRPC)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/cmake/" rel="tag"># cmake</a>
          
            <a href="/tags/wenet/" rel="tag"># wenet</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2021/08/21/wenet-lm/" rel="next" title="wenet-lm (wenet语言模型)">
                <i class="fa fa-chevron-left"></i> wenet-lm (wenet语言模型)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2021/09/04/xnornet-1/" rel="prev" title="xnornet-1">
                xnornet-1 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/uploads/chicken.png"
                alt="Mashiro009" />
            
              <p class="site-author-name" itemprop="name">Mashiro009</p>
              <p class="site-description motion-element" itemprop="description">Hello description</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
                <!-- <a href="/archives/%7C%7C%20archive"> -->
              
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#wenet-cmake-%E6%96%87%E4%BB%B6%E9%98%85%E8%AF%BB"><span class="nav-number">1.</span> <span class="nav-text">wenet cmake 文件阅读</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.1.</span> <span class="nav-text">命令介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="nav-number">1.2.</span> <span class="nav-text">参考资料</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8E%9F%E5%A7%8BCMAKE%E6%96%87%E4%BB%B6%E5%B8%A6%E4%B8%AA%E4%BA%BA%E6%B3%A8%E9%87%8A"><span class="nav-number">1.3.</span> <span class="nav-text">原始CMAKE文件带个人注释</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mashiro</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
